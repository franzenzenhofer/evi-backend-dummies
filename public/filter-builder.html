<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Filter Builder - Multi-Page Generator - EVI.gv.at</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../styles-extended.css">
  <style>
    .help-icon { cursor: help; color: var(--evi-red); font-size: 14px; margin-left: 5px; }
    .inline-help { font-size: 11px; color: var(--evi-gray); margin-top: 3px; display: block; }
    .main-content { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .matrix-table { width: 100%; border-collapse: collapse; font-size: 11px; margin: 15px 0; }
    .matrix-table th { background: var(--evi-red); color: #fff; padding: 8px; text-align: left; }
    .matrix-table td { border: 1px solid var(--evi-border); padding: 6px; }
    .matrix-table tr:hover { background: var(--evi-light-gray); }
    .org-checkbox-list { max-height: 300px; overflow-y: auto; border: 1px solid var(--evi-border);
      padding: 10px; background: #fff; }
    .org-checkbox-list label { display: block; padding: 5px 0; }
    .location-tree { padding-left: 20px; }
    .location-tree summary { cursor: pointer; padding: 5px 0; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="../logo.svg" alt="EVI.gv.at Logo" class="logo">
      <h1>Filter Builder - Multi-Page Generator</h1>
      <p style="font-size: 14px; color: var(--evi-gray); margin: 5px 0 0 0;">
        Bulk-Generierung von Landing Pages f√ºr Organization √ó Location Kombinationen
      </p>
    </div>

    <div class="main-content">

        <div class="section" id="section-A">
          <h2>A. Scope & Template Selection</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Definieren Sie den Rahmen f√ºr die Multi-Page Generierung
          </p>

          <div class="form-group">
            <label>Datenquelle w√§hlen</label>
            <select>
              <option>Insolvenzen (insolvenzen.evi.gv.at)</option>
              <option>Jobs (jobs.evi.gv.at)</option>
              <option>Ausschreibungen (ausschreibungen.evi.gv.at)</option>
              <option>F√∂rderungen (foerderungen.evi.gv.at)</option>
              <option>Immobilien (immobilien.evi.gv.at)</option>
            </select>
            <span class="inline-help">
              F√ºr Bulk-Generierung: Eine Datenquelle pro Batch. Mehrere Quellen = separate Batches.
            </span>
          </div>

          <div class="form-group">
            <label>Template Basis</label>
            <select>
              <option>Standard Landing Page Template</option>
              <option>Custom Template (Upload HTML)</option>
            </select>
            <span class="inline-help">
              Template wird f√ºr ALLE generierten Seiten verwendet. Platzhalter: {org-name}, {location-name}, {brand}, etc.
            </span>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" checked> Zeige abgelaufenen Content
            </label>
            <span class="inline-help">
              Gilt f√ºr alle generierten Seiten. Einige Content-Typen wie Jobs haben ein Ablaufdatum.
            </span>
          </div>

          <div class="form-group">
            <label>URL Struktur</label>
            <select>
              <option>/lp/{org-slug}-{location-slug}</option>
              <option>/{location-slug}/{org-slug}</option>
              <option>/org/{org-slug}/loc/{location-slug}</option>
              <option>Custom (mit Platzhaltern)</option>
            </select>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" checked>
              Generate parent pages (e.g., /lp/alle-insolvenzen-wien)
            </label>
            <span class="inline-help">
              Erstellt zus√§tzlich Aggregation-Seiten f√ºr alle Organizations in einer Location
            </span>
          </div>

          <div style="background: #e3f2fd; padding: 12px; margin: 15px 0; border-radius: 4px; border-left: 4px solid #1976d2;">
            <strong style="font-size: 12px; color: #1565c0;">‚ÑπÔ∏è Erwartete Seiten:</strong>
            <p style="font-size: 11px; margin: 5px 0 0 0; color: #1565c0;">
              Bei 15 Organizations √ó 9 Bundesl√§nder = 135 Seiten + 9 Parent Pages = 144 Seiten total
            </p>
          </div>
        </div>

        <div class="section" id="section-B">
          <h2>B. Organizations Selection</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            W√§hlen Sie die Organisationen f√ºr die Multi-Page Generierung
          </p>

          <div class="form-group">
            <label>Suche Organizations</label>
            <input type="text" placeholder="Suchen nach Name, Branche, Rechtsform..."
                   onkeyup="alert('Filter w√ºrde hier die Liste unten einschr√§nken')">
          </div>

          <div class="form-group">
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
              <button class="secondary" onclick="alert('Alle Organizations ausw√§hlen')">‚úÖ Alle</button>
              <button class="secondary" onclick="alert('Alle abw√§hlen')">‚ùå Keine</button>
              <button class="secondary" onclick="alert('Top 50 nach Ergebnissen')">üîù Top 50</button>
            </div>

            <div class="org-checkbox-list">
              <label><input type="checkbox" checked> <strong>Wiener Stadtwerke GmbH</strong> (1.247 Ergebnisse)</label>
              <label><input type="checkbox" checked> <strong>√ñBB-Infrastruktur AG</strong> (892 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Bundesministerium f√ºr Finanzen</strong> (734 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>ASFINAG</strong> (623 Ergebnisse)</label>
              <label><input type="checkbox" checked> <strong>Wien Energie GmbH</strong> (511 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>√ñsterreichische Post AG</strong> (487 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>A1 Telekom Austria AG</strong> (401 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Magistrat der Stadt Wien</strong> (387 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>√ñBB-Personenverkehr AG</strong> (312 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Wiener Linien GmbH</strong> (289 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Verbund AG</strong> (245 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Land Nieder√∂sterreich</strong> (223 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Bundesrechenzentrum GmbH</strong> (198 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>√ñBB-Holding AG</strong> (187 Ergebnisse)</label>
              <label><input type="checkbox"> <strong>Bundesimmobiliengesellschaft</strong> (156 Ergebnisse)</label>
            </div>

            <span class="inline-help">
              Aktuell: 3 Organizations ausgew√§hlt. Strg/Cmd+Click f√ºr Multi-Select.
            </span>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox">
              Automatisch neue Organizations hinzuf√ºgen (Min. 50 Ergebnisse)
            </label>
            <span class="inline-help">
              Wenn aktiviert: Neue Org mit ‚â•50 Ergebnissen wird automatisch in Bulk-Generation aufgenommen
            </span>
          </div>
        </div>

        <div class="section" id="section-C">
          <h2>C. Locations Selection</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Geografische Auswahl mit hierarchischer Struktur: Bundesland ‚Üí Bezirk ‚Üí Stadt
          </p>

          <div class="form-group">
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
              <button class="secondary" onclick="alert('Alle Bundesl√§nder ausw√§hlen')">‚úÖ Alle BL</button>
              <button class="secondary" onclick="alert('Alle abw√§hlen')">‚ùå Keine</button>
              <button class="secondary" onclick="alert('Nur Hauptst√§dte')">üèôÔ∏è Hauptst√§dte</button>
            </div>

            <details open class="location-tree">
              <summary><strong>üá¶üáπ Wien</strong> (234 Bezirke/Gemeinden)</summary>
              <div style="padding-left: 20px;">
                <label><input type="checkbox" checked> Wien Stadt (Gesamt)</label>
                <label><input type="checkbox"> 1010 Innere Stadt</label>
                <label><input type="checkbox"> 1020 Leopoldstadt</label>
                <label><input type="checkbox"> 1030 Landstra√üe</label>
              </div>
            </details>

            <details class="location-tree">
              <summary><strong>Nieder√∂sterreich</strong> (573 Gemeinden)</summary>
              <div style="padding-left: 20px;">
                <label><input type="checkbox"> Nieder√∂sterreich (Gesamt)</label>
                <details>
                  <summary>Bezirk Amstetten (28 Gemeinden)</summary>
                  <div style="padding-left: 20px;">
                    <label><input type="checkbox"> Amstetten Stadt</label>
                    <label><input type="checkbox"> Ardagger</label>
                  </div>
                </details>
              </div>
            </details>

            <details class="location-tree">
              <summary><strong>Ober√∂sterreich</strong> (442 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>Steiermark</strong> (286 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>Salzburg</strong> (119 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>Tirol</strong> (277 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>Vorarlberg</strong> (96 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>K√§rnten</strong> (132 Gemeinden)</summary>
            </details>

            <details class="location-tree">
              <summary><strong>Burgenland</strong> (171 Gemeinden)</summary>
            </details>

            <span class="inline-help">
              Aktuell: 2 Locations ausgew√§hlt (Wien Stadt, 1010 Innere Stadt)
            </span>
          </div>
        </div>

        <div class="section" id="section-D">
          <h2>D. Quality Criteria & Policy</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Minimum-Standards f√ºr generierte Seiten definieren
          </p>

          <div class="form-group">
            <label>Minimum Ergebnisse pro Seite</label>
            <input type="number" value="5" style="width: 100px;">
            <span class="inline-help">
              Seiten mit weniger Ergebnissen werden NICHT generiert oder mit noindex versehen
            </span>
          </div>

          <div class="form-group">
            <label>Zero-Result Policy</label>
            <select>
              <option>Seite nicht generieren (404)</option>
              <option>Seite mit noindex + "Keine Ergebnisse" Message</option>
              <option>Geo-Up Fallback (z.B. Bezirk ‚Üí Bundesland)</option>
              <option>Custom Fallback Query</option>
            </select>
          </div>

          <div class="form-group">
            <label>Data Quality Filters</label>
            <label style="margin-left: 20px;">
              <input type="checkbox" checked>
              Duplikate entfernen (fuzzy matching 85%)
            </label>
            <label style="margin-left: 20px;">
              <input type="checkbox">
              Min. 3 ausgef√ºllte Felder pro Ergebnis
            </label>
            <label style="margin-left: 20px;">
              <input type="checkbox">
              Nur Ergebnisse mit deutscher Sprache
            </label>
          </div>

          <div class="form-group">
            <label>Refresh Policy</label>
            <select>
              <option>Live-Modus (t√§glich 03:00 Uhr Update)</option>
              <option>Snapshot (einmalig bei Generierung)</option>
              <option>W√∂chentlich (Montag 03:00 Uhr)</option>
              <option>Monatlich (1. des Monats)</option>
            </select>
            <span class="inline-help">
              Bei Live-Modus: JSON-LD itemCount + Ergebniszahl wird t√§glich aktualisiert
            </span>
          </div>

          <div style="background: #fff3e0; padding: 12px; margin: 15px 0; border-radius: 4px; border-left: 4px solid #f57c00;">
            <strong style="font-size: 12px; color: #e65100;">‚ö†Ô∏è Hinweis:</strong>
            <p style="font-size: 11px; margin: 5px 0 0 0; color: #e65100;">
              Seiten unter Minimum werden automatisch auf noindex gesetzt.
              √úberwachen Sie die "Zero Results Report" regelm√§√üig!
            </p>
          </div>
        </div>

        <div class="section" id="section-E">
          <h2>E. Generation Preview & Impact Analysis (DRY-RUN)</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Vorschau ALLER zu generierenden Seiten mit Ergebniszahlen, URLs, und QC-Status
          </p>

          <div style="display: flex; gap: 12px; margin-bottom: 15px;">
            <button onclick="alert('Dry-Run wird ausgef√ºhrt...')">üîç Dry-Run starten</button>
            <button class="secondary" onclick="alert('Export als CSV')">üì• Export CSV</button>
          </div>

          <div style="background: #e8f5e9; border-left: 4px solid #388e3c; padding: 12px; margin: 15px 0;">
            <strong style="color: #2e7d32;">‚úÖ DRY-RUN ERFOLGREICH</strong>
            <p style="font-size: 11px; margin: 5px 0 0 0; color: #2e7d32;">
              6 Seiten werden generiert. 0 Blocker. 2 Warnungen (unter empfohlenen 50 Ergebnissen).
            </p>
          </div>

          <table class="matrix-table">
            <thead>
              <tr>
                <th>Organization</th>
                <th>Location</th>
                <th>URL</th>
                <th>Ergebnisse</th>
                <th>Status</th>
                <th>QC</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Wiener Stadtwerke GmbH</td>
                <td>Wien</td>
                <td><code>/lp/wiener-stadtwerke-wien</code></td>
                <td style="text-align: right; font-weight: bold;">234</td>
                <td style="color: var(--evi-success);">‚úÖ OK</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
              <tr>
                <td>Wiener Stadtwerke GmbH</td>
                <td>Wien 1010</td>
                <td><code>/lp/wiener-stadtwerke-wien-1010</code></td>
                <td style="text-align: right;">12</td>
                <td style="color: var(--evi-warning);">‚ö†Ô∏è Low</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
              <tr>
                <td>√ñBB-Infrastruktur AG</td>
                <td>Wien</td>
                <td><code>/lp/oebb-infrastruktur-wien</code></td>
                <td style="text-align: right; font-weight: bold;">187</td>
                <td style="color: var(--evi-success);">‚úÖ OK</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
              <tr>
                <td>√ñBB-Infrastruktur AG</td>
                <td>Wien 1010</td>
                <td><code>/lp/oebb-infrastruktur-wien-1010</code></td>
                <td style="text-align: right;">8</td>
                <td style="color: var(--evi-warning);">‚ö†Ô∏è Low</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
              <tr>
                <td>Wien Energie GmbH</td>
                <td>Wien</td>
                <td><code>/lp/wien-energie-wien</code></td>
                <td style="text-align: right; font-weight: bold;">156</td>
                <td style="color: var(--evi-success);">‚úÖ OK</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
              <tr>
                <td>Wien Energie GmbH</td>
                <td>Wien 1010</td>
                <td><code>/lp/wien-energie-wien-1010</code></td>
                <td style="text-align: right;">7</td>
                <td style="color: var(--evi-warning);">‚ö†Ô∏è Low</td>
                <td style="color: var(--evi-success);">‚úÖ Pass</td>
              </tr>
            </tbody>
          </table>

          <div style="background: #fff3e0; padding: 12px; margin: 15px 0; border-radius: 4px; border-left: 4px solid #f57c00;">
            <strong style="font-size: 12px; color: #e65100;">‚ö†Ô∏è 2 Warnungen:</strong>
            <ul style="font-size: 11px; margin: 5px 0 0 0; padding-left: 20px; color: #e65100;">
              <li>/lp/wiener-stadtwerke-wien-1010: 12 Ergebnisse (empfohlen: ‚â•50)</li>
              <li>/lp/wien-energie-wien-1010: 7 Ergebnisse (empfohlen: ‚â•50)</li>
            </ul>
          </div>
        </div>

        <div class="section" id="section-F">
          <h2>F. Interlinking & Navigation</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Automatische interne Verlinkung zwischen generierten Seiten
          </p>

          <div class="form-group">
            <label>
              <input type="checkbox" checked>
              Auto-Interlinking aktivieren
            </label>
            <span class="inline-help">
              Erstellt automatisch Links zwischen verwandten Seiten (gleiche Org, andere Location; gleiche Location, andere Org)
            </span>
          </div>

          <div class="form-group">
            <label>Interlinking Strategie</label>
            <label style="margin-left: 20px;">
              <input type="checkbox" checked>
              Geo-Siblings (z.B. "Wien Energie Wien" ‚Üí "Wien Energie Nieder√∂sterreich")
            </label>
            <label style="margin-left: 20px;">
              <input type="checkbox" checked>
              Org-Siblings (z.B. "Wiener Stadtwerke Wien" ‚Üí "√ñBB Wien")
            </label>
            <label style="margin-left: 20px;">
              <input type="checkbox">
              Parent-Child (z.B. "Wien" ‚Üí "Wien 1010")
            </label>
          </div>

          <div class="form-group">
            <label>Breadcrumbs</label>
            <select>
              <option>Auto (Home ‚Üí Index ‚Üí Organization ‚Üí Location)</option>
              <option>Custom Template</option>
              <option>Deaktiviert</option>
            </select>
          </div>

          <div class="form-group">
            <label>Related Pages Block</label>
            <input type="text" placeholder="H2 √úberschrift (z.B. 'Verwandte Seiten')" value="Verwandte Seiten">
            <span class="inline-help">
              Block mit max. 5 verwandten Seiten wird am Ende jeder generierten Seite eingef√ºgt
            </span>
          </div>
        </div>

        <div class="section" id="section-G">
          <h2>G. Bulk Publishing & Monitoring</h2>
          <p style="font-size: 13px; color: var(--evi-gray); margin-bottom: 15px;">
            Ver√∂ffentlichung ALLER generierten Seiten mit Schedule und Monitoring
          </p>

          <div style="background: #e8f5e9; border-left: 4px solid #388e3c; padding: 15px; margin: 15px 0;">
            <strong style="color: #2e7d32;">‚úÖ BEREIT ZUR BULK-VER√ñFFENTLICHUNG</strong>
            <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 13px; color: #2e7d32;">
              <li>6 Seiten bereit zur Generierung</li>
              <li>Alle QC-Checks bestanden</li>
              <li>Template validiert</li>
              <li>URLs eindeutig (keine Duplikate)</li>
            </ul>
          </div>

          <div class="form-group">
            <label>Schedule Publishing (optional)</label>
            <input type="datetime-local">
            <span class="inline-help">
              Leer lassen f√ºr sofortige Bulk-Generierung. Zeit in CET.
            </span>
          </div>

          <div class="form-group">
            <label>Batch-Gr√∂√üe</label>
            <input type="number" value="50" style="width: 100px;">
            <span class="inline-help">
              Bei gro√üen Mengen (>100 Seiten): Generierung wird in Batches aufgeteilt (je 50 Seiten)
            </span>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" checked>
              Monitoring aktivieren (Daily Zero-Results Report)
            </label>
            <span class="inline-help">
              T√§glich um 04:00 Uhr: E-Mail mit Seiten unter Minimum-Ergebnissen
            </span>
          </div>

          <div style="display: flex; gap: 12px; margin-top: 25px; flex-wrap: wrap;">
            <button onclick="alert('Vorschau einer Beispielseite wird ge√∂ffnet...')">
              üîç Beispielseite Vorschau
            </button>
            <button class="secondary" onclick="alert('Entwurf gespeichert!')">
              üíæ Entwurf speichern
            </button>
            <button onclick="if(confirm('6 Seiten jetzt generieren und ver√∂ffentlichen?')) alert('Bulk-Generierung gestartet!')"
                    style="background: var(--evi-success); border-color: var(--evi-success);">
              üöÄ Jetzt Ver√∂ffentlichen (6 Seiten)
            </button>
          </div>

          <div style="background: #e3f2fd; padding: 12px; margin: 20px 0; border-radius: 4px; border-left: 4px solid #1976d2;">
            <strong style="font-size: 12px; color: #1565c0;">‚ÑπÔ∏è Nach Bulk-Ver√∂ffentlichung:</strong>
            <ul style="font-size: 11px; margin: 5px 0 0 0; padding-left: 20px; color: #1565c0;">
              <li>Alle Seiten werden als Static HTML (SSR) + JSON-LD generiert</li>
              <li>Sitemap wird mit allen neuen URLs aktualisiert</li>
              <li>GSC-Ping f√ºr jede URL (max. 50 URLs/Request)</li>
              <li>Bei Live-Modus: Background Jobs aktiviert</li>
              <li>Monitoring Dashboard verf√ºgbar unter /admin/lp-monitor</li>
            </ul>
          </div>

          <hr style="margin: 40px 0;">

          <div style="text-align: center; padding: 30px 0;">
            <a href="query-builder.html" style="display: inline-block; background: var(--evi-red); color: #fff;
               padding: 15px 30px; border-radius: 4px; text-decoration: none; font-size: 14px; font-weight: bold;">
              ‚Üê Zur√ºck zum Query Builder (Single-Page)
            </a>
          </div>
        </div>

    </div>
  </div>
</body>
</html>

